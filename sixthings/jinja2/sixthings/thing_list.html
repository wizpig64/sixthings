<!doctype html>
<head>
  <title>Six Things</title>
  <script src="https://code.jquery.com/jquery-3.1.0.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
  <h1>Six Things</h1>
  <ul>
    {% for object in object_list %}
      <li><span class="button-delete" id="{{ object.id }}">[X]</span> {{ object.text }}</li>
    {% endfor %}
    <li><span class="button-new">[+]</span><input id="new"></li>
  </ul>
  <script type="text/javascript">
    $('.button-delete').click(function(){
      var id = $(this).attr('id')
      $.ajax({
        type: "POST",
        url: id+'/delete/',
        data: {
          csrfmiddlewaretoken: '{{ csrf_token }}',
          id: id,
        },
        success: function() {
          location.reload()
        }
      })
    })
    $('.button-new').click(function(){
      $.ajax({
        type: "POST",
        url: 'new/',
        data: {
          csrfmiddlewaretoken: '{{ csrf_token }}',
          user: '{{ request.user.id }}',
          text: $('#new').val(),
        },
        success: function() {
          location.reload()
        }
      })
    })
  </script>
</body>